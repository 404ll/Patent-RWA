#  Patent RWA System

åŸºäºä»¥å¤ªåŠçš„ä¸“åˆ©çœŸå®ä¸–ç•Œèµ„äº§(RWA)ä»£å¸åŒ–å¹³å°ï¼Œé‡‡ç”¨**å¤šä¸“åˆ©èµ„äº§æ”¯æ’‘å•ä¸€ Patent ä»£å¸**çš„åˆ›æ–°æ¶æ„ï¼Œç¬¦åˆHKMAç›‘ç®¡è¦æ±‚ã€‚

## ï¿½ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Patent RWA System                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    PatentCoin                      â”‚ â”‚
â”‚  â”‚                   ç»Ÿä¸€ä¸“åˆ©èµ„äº§ä»£å¸                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â€¢ ERC20 + ERC20Burnable + ERC20Pausable                    â”‚ â”‚
â”‚  â”‚ â€¢ UUPSå¯å‡çº§ä»£ç†æ¨¡å¼                                        â”‚ â”‚
â”‚  â”‚ â€¢ åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)                                 â”‚ â”‚
â”‚  â”‚ â€¢ å¤šä¸“åˆ©èµ„äº§æ”¯æ’‘                                           â”‚ â”‚
â”‚  â”‚ â€¢ ç»Ÿä¸€æ”¶ç›Šåˆ†é…æœºåˆ¶                                         â”‚ â”‚
â”‚  â”‚ â€¢ HKMAåˆè§„åŠŸèƒ½ (é»‘åå•/å†»ç»“/æš‚åœ)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ä¸“åˆ©èµ„äº§æ±                                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚
â”‚  â”‚  â”‚   ä¸“åˆ© #1   â”‚  â”‚   ä¸“åˆ© #2   â”‚  â”‚   ä¸“åˆ© #3   â”‚   ...   â”‚ â”‚
â”‚  â”‚  â”‚ US10123456  â”‚  â”‚ US10789012  â”‚  â”‚ US10456789  â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ ä¼°å€¼: $5M   â”‚  â”‚ ä¼°å€¼: $3M   â”‚  â”‚ ä¼°å€¼: $2M   â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ æƒé‡: 40%   â”‚  â”‚ æƒé‡: 30%   â”‚  â”‚ æƒé‡: 20%   â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ IPFSå…ƒæ•°æ®  â”‚  â”‚ IPFSå…ƒæ•°æ®  â”‚  â”‚ IPFSå…ƒæ•°æ®  â”‚         â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    æ”¶ç›Šåˆ†é…ç³»ç»Ÿ                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ â€¢ å¤šè½®æ¬¡æ”¶ç›Šåˆ†é…                                           â”‚ â”‚
â”‚  â”‚ â€¢ åŸºäºæŒå¸æ¯”ä¾‹çš„å…¬å¹³åˆ†é…                                   â”‚ â”‚
â”‚  â”‚ â€¢ æ”¯æŒå¤šç§æ”¶ç›Šä»£å¸ (USDC/USDT/ETH)                        â”‚ â”‚
â”‚  â”‚ â€¢ å¹³å°è´¹ç”¨è‡ªåŠ¨æ‰£é™¤ (2.5%)                                 â”‚ â”‚
â”‚  â”‚ â€¢ é˜²é‡å¤é¢†å–æœºåˆ¶                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    å¤–éƒ¨é›†æˆ                                 â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚
â”‚  â”‚  â”‚ IPFSå­˜å‚¨    â”‚  â”‚ é“¾ä¸Šæ•°æ®    â”‚  â”‚ ç›‘ç®¡æ¥å£    â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ä¸“åˆ©æ–‡æ¡£  â”‚  â”‚ â€¢ äº¤æ˜“è®°å½•  â”‚  â”‚ â€¢ åˆè§„æŠ¥å‘Š  â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ è¯„ä¼°æŠ¥å‘Š  â”‚  â”‚ â€¢ æ”¶ç›Šåˆ†é…  â”‚  â”‚ â€¢ å®¡è®¡æ—¥å¿—  â”‚         â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ åˆè§„æ–‡ä»¶  â”‚  â”‚ â€¢ äº‹ä»¶æ—¥å¿—  â”‚  â”‚ â€¢ ç›‘ç®¡æŸ¥è¯¢  â”‚         â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ™ºèƒ½åˆçº¦æ¶æ„

#### æ ¸å¿ƒåˆçº¦
- **PatentCoin.sol** - ä¸»åˆçº¦ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½
  - ERC20ä»£å¸æ ‡å‡†å®ç°
  - å¤šä¸“åˆ©èµ„äº§ç®¡ç†
  - ç»Ÿä¸€æ”¶ç›Šåˆ†é…æœºåˆ¶
  - HKMAåˆè§„åŠŸèƒ½
  - UUPSå¯å‡çº§æ¶æ„

#### è¾…åŠ©åˆçº¦
- **TokenMetadataRegistry.sol** - EIP-5269å…ƒæ•°æ®æ³¨å†Œè¡¨
- **PatentVesting.sol** - é€šç”¨ä»£å¸é”ä»“åˆçº¦
- **PatentOracle.sol** - Chainlinké¢„è¨€æœºé›†æˆ
- **PatentNFT.sol** - ä¸“åˆ©è¯ä¹¦NFT

### å‰ç«¯åº”ç”¨æ¶æ„

#### æ ¸å¿ƒç»„ä»¶
- **Dashboard** - ä¸»ä»ªè¡¨æ¿ï¼Œæ˜¾ç¤ºPATENTä»£å¸æŠ•èµ„ç»„åˆ
- **PatentAssetViewer** - ä¸“åˆ©èµ„äº§æ± ç®¡ç†ç•Œé¢
- **RevenueStats** - æ”¶ç›Šåˆ†é…ç»Ÿè®¡å’Œé¢†å–
- **CompliancePanel** - åˆè§„ç®¡ç†é¢æ¿
- **AssetBackingRatio** - èµ„äº§æ”¯æ’‘æ¯”ç‡ç›‘æ§

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. å¤šä¸“åˆ©èµ„äº§æ”¯æ’‘æ¶æ„

#### ç»Ÿä¸€ä»£å¸æ¨¡å¼
```solidity
contract PatentCoin is ERC20Upgradeable, AccessControlEnumerableUpgradeable {
    // ä¸“åˆ©èµ„äº§ç»“æ„
    struct PatentAsset {
        string patentNumber;     // ä¸“åˆ©å·
        string title;           // ä¸“åˆ©æ ‡é¢˜  
        string[] inventors;     // å‘æ˜äººåˆ—è¡¨
        uint256 valuationUSD;   // ç¾å…ƒä¼°å€¼
        uint256 weight;         // æƒé‡ (åŸºç‚¹)
        bool active;            // æ˜¯å¦æ¿€æ´»
        uint256 addedTimestamp; // æ·»åŠ æ—¶é—´
        string ipfsMetadata;    // IPFSå…ƒæ•°æ®å“ˆå¸Œ
    }
    
    mapping(string => PatentAsset) public patents;
    string[] public patentNumbers;
    uint256 public totalPatentValuation;
}
```

#### èµ„äº§æ”¯æ’‘æ¯”ç‡è®¡ç®—
```solidity
function getBackingRatio() external view returns (uint256) {
    if (totalSupply() == 0) return 0;
    return (totalPatentValuation * 1e18) / totalSupply();
}
```

### 2. ç»Ÿä¸€æ”¶ç›Šåˆ†é…æœºåˆ¶

#### å¤šè½®æ¬¡æ”¶ç›Šåˆ†é…
```solidity
struct RevenueRound {
    uint256 totalAmount;       // æ€»æ”¶ç›Šé‡‘é¢
    uint256 timestamp;         // åˆ†é…æ—¶é—´
    address revenueToken;      // æ”¶ç›Šä»£å¸åœ°å€
    mapping(address => bool) claimed; // ç”¨æˆ·é¢†å–çŠ¶æ€
    uint256 totalSupplySnapshot; // æ€»ä¾›åº”é‡å¿«ç…§
}

function distributeRevenue(uint256 totalRevenue, address revenueToken) external {
    // è®¡ç®—å¹³å°è´¹ç”¨ (2.5%)
    uint256 platformFee = (totalRevenue * platformFeeRate) / 10000;
    uint256 netRevenue = totalRevenue - platformFee;
    
    // åˆ›å»ºæ–°çš„åˆ†é…è½®æ¬¡
    currentRevenueRound++;
    RevenueRound storage round = revenueRounds[currentRevenueRound];
    round.totalAmount = netRevenue;
    round.revenueToken = revenueToken;
    round.totalSupplySnapshot = totalSupply();
}
```

#### æŒ‰æ¯”ä¾‹æ”¶ç›Šé¢†å–
```solidity
function claimRevenue(uint256 roundId) external {
    RevenueRound storage round = revenueRounds[roundId];
    require(!round.claimed[msg.sender], "Already claimed");
    
    uint256 userBalance = balanceOf(msg.sender);
    uint256 userShare = (round.totalAmount * userBalance) / round.totalSupplySnapshot;
    
    round.claimed[msg.sender] = true;
    IERC20Upgradeable(round.revenueToken).transfer(msg.sender, userShare);
}
```

### 3. HKMAåˆè§„æ¶æ„

#### åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
```solidity
bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");
bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");
bytes32 public constant BLACKLISTER_ROLE = keccak256("BLACKLISTER_ROLE");
bytes32 public constant FREEZER_ROLE = keccak256("FREEZER_ROLE");
bytes32 public constant PATENT_MANAGER_ROLE = keccak256("PATENT_MANAGER_ROLE");
bytes32 public constant REVENUE_MANAGER_ROLE = keccak256("REVENUE_MANAGER_ROLE");
```

#### åˆè§„åŠŸèƒ½å®ç°
```solidity
// é»‘åå•æœºåˆ¶
mapping(address => bool) private _blacklisted;

// åœ°å€å†»ç»“æœºåˆ¶
mapping(address => bool) private _frozen;

// è½¬è´¦å‰æ£€æŸ¥
function _beforeTokenTransfer(address from, address to, uint256 amount) internal override {
    super._beforeTokenTransfer(from, to, amount);
    
    if (from != address(0) && to != address(0)) {
        require(!_blacklisted[from], "PatentCoin: sender is blacklisted");
        require(!_blacklisted[to], "PatentCoin: recipient is blacklisted");
        require(!_frozen[from], "PatentCoin: sender is frozen");
        require(!_frozen[to], "PatentCoin: recipient is frozen");
    }
}
```

### 4. å¯å‡çº§æ¶æ„

#### UUPSä»£ç†æ¨¡å¼
```solidity
contract PatentCoin is UUPSUpgradeable {
    function _authorizeUpgrade(address newImplementation) 
        internal 
        override 
        onlyRole(UPGRADER_ROLE) 
    {
        emit Upgraded(newImplementation);
    }
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16
- Hardhat >= 2.0
- MetaMaské’±åŒ…
- IPFSèŠ‚ç‚¹(å¯é€‰)

### å®‰è£…ä¾èµ–
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd biopharma-patent-rwa

# å®‰è£…åˆçº¦ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install
```

### éƒ¨ç½²åˆçº¦
```bash
# ç¼–è¯‘åˆçº¦
npx hardhat compile

# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npx hardhat node
npx hardhat run scripts/deploy-patentcoin.js --network localhost

# éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
npx hardhat run scripts/deploy-patentcoin.js --network goerli
```

### å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm start
```

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ä¸“åˆ©èµ„äº§ç®¡ç†
- **å¤šä¸“åˆ©æ”¯æ’‘**: å¤šä¸ªä¸“åˆ©èµ„äº§æ”¯æ’‘å•ä¸€PATENTä»£å¸
- **åŠ¨æ€æƒé‡**: æ”¯æŒä¸“åˆ©èµ„äº§æƒé‡è°ƒæ•´
- **å®æ—¶ä¼°å€¼**: é“¾ä¸Šä¸“åˆ©ä¼°å€¼æ›´æ–°
- **IPFSå­˜å‚¨**: å»ä¸­å¿ƒåŒ–ä¸“åˆ©æ–‡æ¡£å­˜å‚¨
- **èµ„äº§æ”¯æ’‘æ¯”ç‡**: å®æ—¶è®¡ç®—èµ„äº§æ”¯æ’‘æ¯”ç‡

### æ”¶ç›Šåˆ†é…
- **ç»Ÿä¸€åˆ†é…**: æ‰€æœ‰ä¸“åˆ©æ”¶ç›Šæ±‡é›†åç»Ÿä¸€åˆ†é…
- **å¤šè½®æ¬¡æ”¯æŒ**: æ”¯æŒå¤šè½®æ¬¡æ”¶ç›Šåˆ†é…
- **å¤šå¸ç§æ”¯æŒ**: æ”¯æŒUSDC/USDT/ETHç­‰æ”¶ç›Šä»£å¸
- **å¹³å°è´¹ç”¨**: è‡ªåŠ¨æ‰£é™¤å¹³å°è´¹ç”¨(2.5%)
- **é˜²é‡å¤é¢†å–**: å®Œå–„çš„é˜²é‡å¤é¢†å–æœºåˆ¶

### HKMAåˆè§„
- **è§’è‰²åˆ†ç¦»**: 9ç§ä¸åŒè§’è‰²æƒé™åˆ†ç¦»
- **é»‘åå•æœºåˆ¶**: æ”¯æŒåœ°å€é»‘åå•ç®¡ç†
- **åœ°å€å†»ç»“**: æ”¯æŒå•ä¸ªåœ°å€å†»ç»“
- **å…¨å±€æš‚åœ**: ç´§æ€¥æƒ…å†µä¸‹å…¨å±€æš‚åœåŠŸèƒ½
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„äº‹ä»¶æ—¥å¿—è®°å½•

### å¯å‡çº§æ€§
- **UUPSä»£ç†**: ä½¿ç”¨UUPSä»£ç†æ¨¡å¼
- **æƒé™æ§åˆ¶**: åªæœ‰UPGRADER_ROLEå¯ä»¥å‡çº§
- **çŠ¶æ€ä¿æŒ**: å‡çº§æ—¶ä¿æŒæ‰€æœ‰çŠ¶æ€æ•°æ®

## ğŸ“Š åˆçº¦æ¥å£

### ä¸“åˆ©èµ„äº§ç®¡ç†
```solidity
// æ·»åŠ ä¸“åˆ©èµ„äº§
function addPatent(
    string memory patentNumber,
    string memory title,
    string[] memory inventors,
    uint256 valuationUSD,
    uint256 weight,
    string memory ipfsMetadata
) external onlyRole(PATENT_MANAGER_ROLE);

// æ›´æ–°ä¸“åˆ©ä¿¡æ¯
function updatePatent(
    string memory patentNumber,
    uint256 newValuationUSD,
    uint256 newWeight,
    string memory newIpfsMetadata
) external onlyRole(PATENT_MANAGER_ROLE);

// åœç”¨ä¸“åˆ©
function deactivatePatent(string memory patentNumber) 
    external onlyRole(PATENT_MANAGER_ROLE);
```

### æ”¶ç›Šåˆ†é…
```solidity
// åˆ†é…æ”¶ç›Š
function distributeRevenue(uint256 totalRevenue, address revenueToken) 
    external onlyRole(REVENUE_MANAGER_ROLE);

// é¢†å–æ”¶ç›Š
function claimRevenue(uint256 roundId) external;

// æŸ¥è¯¢å¯é¢†å–æ”¶ç›Š
function getClaimableRevenue(address user, uint256 roundId) 
    external view returns (uint256);
```

### æŸ¥è¯¢åŠŸèƒ½
```solidity
// è·å–ä¸“åˆ©èµ„äº§è¯¦æƒ…
function getPatent(string memory patentNumber) 
    external view returns (PatentAsset memory);

// è·å–æ‰€æœ‰ä¸“åˆ©å·
function getAllPatentNumbers() external view returns (string[] memory);

// è·å–èµ„äº§æ”¯æ’‘æ¯”ç‡
function getBackingRatio() external view returns (uint256);

// è·å–ä¸“åˆ©æ•°é‡
function getPatentCount() external view returns (uint256);
```

### åˆè§„åŠŸèƒ½
```solidity
// é»‘åå•ç®¡ç†
function addToBlacklist(address account) external onlyRole(BLACKLISTER_ROLE);
function removeFromBlacklist(address account) external onlyRole(BLACKLISTER_ROLE);
function isBlacklisted(address account) external view returns (bool);

// åœ°å€å†»ç»“
function freezeAddress(address account) external onlyRole(FREEZER_ROLE);
function unfreezeAddress(address account) external onlyRole(FREEZER_ROLE);
function isFrozen(address account) external view returns (bool);

// æš‚åœæ§åˆ¶
function pause() external onlyRole(PAUSER_ROLE);
function unpause() external onlyRole(RESUME_ROLE);
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ contracts/                    # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ PatentCoin.sol            # ä¸»åˆçº¦ - å¤šä¸“åˆ©èµ„äº§æ”¯æ’‘çš„PATENTä»£å¸
â”‚   â”œâ”€â”€ TokenMetadataRegistry.sol # å…ƒæ•°æ®æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ PatentVesting.sol        # é€šç”¨ä»£å¸é”ä»“åˆçº¦
â”‚   â”œâ”€â”€ PatentOracle.sol         # é¢„è¨€æœºåˆçº¦
â”‚   â”œâ”€â”€ PatentNFT.sol            # ä¸“åˆ©è¯ä¹¦NFT
â”‚   â”œâ”€â”€ interfaces/              # åˆçº¦æ¥å£
â”‚   â”‚   â””â”€â”€ IEIP5269.sol         # EIP-5269å…ƒæ•°æ®æ¥å£
â”‚   â””â”€â”€ mocks/                   # æµ‹è¯•ç”¨æ¨¡æ‹Ÿåˆçº¦
â”‚       â””â”€â”€ MockERC20.sol        # æ¨¡æ‹ŸERC20ä»£å¸
â”œâ”€â”€ scripts/                     # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ deploy-patentcoin.js      # PatentCoinéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/                        # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ PatentCoin.test.js        # å®Œæ•´æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ frontend/                    # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx    # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ PatentAssetViewer.tsx # ä¸“åˆ©èµ„äº§æŸ¥çœ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueStats.tsx # æ”¶ç›Šç»Ÿè®¡
â”‚   â”‚   â”‚   â””â”€â”€ CompliancePanel.tsx # åˆè§„ç®¡ç†é¢æ¿
â”‚   â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ipfs.ts          # IPFSæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ contracts.ts     # åˆçº¦äº¤äº’
â”‚   â”‚   â””â”€â”€ hooks/               # React Hooks
â”‚   â””â”€â”€ package.json             # å‰ç«¯ä¾èµ–
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â””â”€â”€ PatentCoin-Documentation.md # è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
â”œâ”€â”€ hardhat.config.js            # Hardhaté…ç½®
â”œâ”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## ğŸ¨ å‰ç«¯ç»„ä»¶ç¤ºä¾‹

### ä¸“åˆ©èµ„äº§æ± æŸ¥çœ‹å™¨
```typescript
const PatentAssetViewer: React.FC = () => {
  const { data: patentCount } = useContractRead({
    address: PATENTCOIN_ADDRESS,
    abi: patentCoinABI,
    functionName: 'getPatentCount',
  });

  const { data: totalValuation } = useContractRead({
    address: PATENTCOIN_ADDRESS,
    abi: patentCoinABI,
    functionName: 'totalPatentValuation',
  });

  const { data: backingRatio } = useContractRead({
    address: PATENTCOIN_ADDRESS,
    abi: patentCoinABI,
    functionName: 'getBackingRatio',
  });

  return (
    <div className="bg-white shadow rounded-lg p-6">
      <h3 className="text-lg font-medium mb-4">ä¸“åˆ©èµ„äº§æ± </h3>
      <div className="grid grid-cols-3 gap-4">
        <div className="text-center">
          <p className="text-2xl font-bold text-blue-600">{patentCount?.toString()}</p>
          <p className="text-sm text-gray-500">ä¸“åˆ©æ•°é‡</p>
        </div>
        <div className="text-center">
          <p className="text-2xl font-bold text-green-600">
            ${formatEther(totalValuation || 0)}M
          </p>
          <p className="text-sm text-gray-500">æ€»ä¼°å€¼</p>
        </div>
        <div className="text-center">
          <p className="text-2xl font-bold text-purple-600">
            ${formatEther(backingRatio || 0)}
          </p>
          <p className="text-sm text-gray-500">æ”¯æ’‘æ¯”ç‡</p>
        </div>
      </div>
    </div>
  );
};
```

### æ”¶ç›Šé¢†å–ç»„ä»¶
```typescript
const RevenueClaimCard: React.FC<{ roundId: number }> = ({ roundId }) => {
  const { address } = useAccount();
  
  const { data: claimableAmount } = useContractRead({
    address: PATENTCOIN_ADDRESS,
    abi: patentCoinABI,
    functionName: 'getClaimableRevenue',
    args: [address, roundId],
  });

  const { write: claimRevenue } = useContractWrite({
    address: PATENTCOIN_ADDRESS,
    abi: patentCoinABI,
    functionName: 'claimRevenue',
    args: [roundId],
  });

  return (
    <div className="bg-white shadow rounded-lg p-4">
      <div className="flex justify-between items-center">
        <div>
          <h4 className="font-medium">ç¬¬ {roundId} è½®æ”¶ç›Š</h4>
          <p className="text-sm text-gray-500">
            å¯é¢†å–: {formatUnits(claimableAmount || 0, 6)} USDC
          </p>
        </div>
        <button
          onClick={() => claimRevenue?.()}
          disabled={!claimableAmount || claimableAmount.isZero()}
          className="bg-blue-600 text-white px-4 py-2 rounded disabled:bg-gray-300"
        >
          é¢†å–æ”¶ç›Š
        </button>
      </div>
    </div>
  );
};
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### é‡å…¥æ”»å‡»é˜²æŠ¤
- æ‰€æœ‰çŠ¶æ€å˜æ›´å‡½æ•°ä½¿ç”¨`nonReentrant`ä¿®é¥°ç¬¦
- éµå¾ªæ£€æŸ¥-æ•ˆæœ-äº¤äº’æ¨¡å¼

### æƒé™åˆ†ç¦»
- 9ç§ä¸åŒè§’è‰²ï¼Œæƒé™å®Œå…¨åˆ†ç¦»
- æ²¡æœ‰å•ä¸€åœ°å€æ‹¥æœ‰æ‰€æœ‰æƒé™
- ç®¡ç†å‘˜å¯ä»¥åˆ†é…å’Œæ’¤é”€è§’è‰²

### å‡çº§å®‰å…¨
- åªæœ‰UPGRADER_ROLEå¯ä»¥æ‰§è¡Œå‡çº§
- ä½¿ç”¨UUPSæ¨¡å¼ï¼Œå‡çº§é€»è¾‘åœ¨å®ç°åˆçº¦ä¸­
- å‡çº§æ—¶ä¿æŒæ‰€æœ‰çŠ¶æ€æ•°æ®

### è¾“å…¥éªŒè¯
- æ‰€æœ‰å‡½æ•°è¿›è¡Œä¸¥æ ¼çš„è¾“å…¥éªŒè¯
- é˜²æ­¢é›¶åœ°å€å’Œæ— æ•ˆå‚æ•°
- æ•°å€¼èŒƒå›´æ£€æŸ¥

## ğŸ“ˆ ç»æµæ¨¡å‹

### èµ„äº§æ”¯æ’‘æœºåˆ¶
- **æ”¯æ’‘æ¯”ç‡** = ä¸“åˆ©æ€»ä¼°å€¼ / PATENTä»£å¸æ€»ä¾›åº”é‡
- **åŠ¨æ€è°ƒæ•´**: ä¸“åˆ©ä¼°å€¼å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°æ”¯æ’‘æ¯”ç‡
- **é€æ˜è®¡ç®—**: é“¾ä¸Šå®æ—¶è®¡ç®—ï¼Œå®Œå…¨é€æ˜

### æ”¶ç›Šåˆ†é…æ¨¡å‹
- **æ”¶ç›Šæ¥æº**: ä¸“åˆ©è®¸å¯è´¹ã€ä¸“åˆ©è½¬è®©æ”¶å…¥ç­‰
- **åˆ†é…æ–¹å¼**: æŒ‰æŒå¸æ¯”ä¾‹å…¬å¹³åˆ†é…
- **å¹³å°è´¹ç”¨**: 2.5%å¹³å°è´¹ç”¨ï¼Œç”¨äºè¿è¥ç»´æŠ¤
- **å¤šå¸ç§æ”¯æŒ**: æ”¯æŒUSDCã€USDTã€ETHç­‰å¤šç§æ”¶ç›Šä»£å¸

### è´¹ç”¨ç»“æ„
- **å¹³å°è´¹ç”¨**: 2.5% (å¯è°ƒæ•´ï¼Œæœ€é«˜10%)
- **Gasè´¹ç”¨**: ç”¨æˆ·æ‰¿æ‹…é“¾ä¸Šäº¤äº’Gasè´¹ç”¨
- **æ— é¢å¤–è´¹ç”¨**: æ— é“¸å¸è´¹ã€è½¬è´¦è´¹ç­‰é¢å¤–è´¹ç”¨

---

âš ï¸ **é£é™©æç¤º**: æœ¬é¡¹ç›®æ¶‰åŠåŒºå—é“¾æŠ€æœ¯å’Œæ•°å­—èµ„äº§ï¼Œå­˜åœ¨æŠ€æœ¯é£é™©ã€å¸‚åœºé£é™©å’Œç›‘ç®¡é£é™©ã€‚è¯·åœ¨å……åˆ†äº†è§£ç›¸å…³é£é™©çš„åŸºç¡€ä¸Šè°¨æ…å‚ä¸ã€‚æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚
